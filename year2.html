<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–û—Ç—á—ë—Ç—ã</title>
  <link rel="stylesheet" href="css/style.css">

  <!-- üì± –î–æ–±–∞–≤–ª—è–µ–º PWA-–º–∞–Ω–∏—Ñ–µ—Å—Ç -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffffff">

  <!-- –î–ª—è iPhone (–∏–∫–æ–Ω–∫–∏ –∏ —Ü–≤–µ—Ç —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞) -->
  <link rel="apple-touch-icon" href="images/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>

<header class="header">
  <div class="container">
    <div class="header__content">
      <a class="header__logo-link" href="advice.html">
        <img class="header__logo" src="images/logo.png" height="36" width="170"
          alt="–õ–æ–≥–æ—Ç–∏–ø –°–µ–º–µ–π–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞">
      </a>
      <button class="header__menu">
        <span class="header__menu-line"></span>
      </button>
    </div>
  </div>
</header>

<main>
  <div class="cont">
    <h1>–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã</h1>
    <div id="reportsContainer"></div>
    <button id="clearReports">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –æ—Ç—á—ë—Ç—ã</button>
    <a href="expenses.html">–ù–∞–∑–∞–¥ –∫ —Ä–∞—Å—Ö–æ–¥–∞–º</a>
  </div>
</main>

<footer class="footer">
  <div class="container">
    <div class="footer__content">
      <a class="footer__logo-link" href="advice.html">
        <img class="footer__logo" src="images/logo.png" height="36" width="170"
          alt="–õ–æ–≥–æ—Ç–∏–ø –°–µ–º–µ–π–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞">
      </a>
      <ul class="footer__contacts-list">
        <li class="footer__contacts-item">
          <span class="footer__contacts-text">–ü–æ–∑–≤–æ–Ω–∏—Ç—å –†–∏–Ω–∞—Ç—É</span>
          <a class="footer__contacts-phone" href="tel:+77056600636">+7 705 660 06 36</a>
        </li>
        <li class="footer__contacts-item">
          <span class="footer__contacts-text">–ü–æ–∑–≤–æ–Ω–∏—Ç—å –ê–Ω–µ</span>
          <a class="footer__contacts-phone" href="tel:+77006937462">+7 700 693 74 62</a>
        </li>
      </ul>
      <div class="footer__info">
        <span class="footer__info-text">–°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç –•–∞—Å–∞–Ω–æ–≤—ã—Ö</span>
      </div>
      <span class="footer__note">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç 20.08.2025</span>
    </div>
  </div>
</footer>

<script>
  function loadReports() {
    const reports = JSON.parse(localStorage.getItem('expenseReports') || '[]');
    const container = document.getElementById('reportsContainer');
    container.innerHTML = '';

    if (reports.length === 0) {
      container.innerHTML = '<p>–û—Ç—á—ë—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>';
      return;
    }

    reports.sort((a, b) => new Date(b.date) - new Date(a.date));

    reports.forEach(r => {
      const block = document.createElement('div');
      block.className = 'report-block';
      block.innerHTML = `<h3>${r.label}</h3><div class="table-wrapper">${r.table}</div>`;
      container.appendChild(block);
    });
  }

  document.getElementById('clearReports').addEventListener('click', () => {
    if (confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –æ—Ç—á—ë—Ç—ã?')) {
      localStorage.removeItem('expenseReports');
      loadReports();
    }
  });

  loadReports();

  // üì± –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(() => console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
      .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', err));
  }
</script>

</body>
</html>
