<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/style.css">
   <!-- üì± –î–æ–±–∞–≤–ª—è–µ–º PWA-–º–∞–Ω–∏—Ñ–µ—Å—Ç -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffffff">

  <!-- –î–ª—è iPhone (–∏–∫–æ–Ω–∫–∏ –∏ —Ü–≤–µ—Ç —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞) -->
  <link rel="apple-touch-icon" href="images/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>–î–æ—Ö–æ–¥—ã</title>
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="header__content">
        <a class="header__logo-link" href="advice.html">
          <img class="header__logo" src="images/logo.png" height="36" width="170" alt="–õ–æ–≥–æ—Ç–∏–ø –°–µ–º–µ–π–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞">
        </a>
        <button class="header__menu">
          <span class="header__menu-line"></span>
        </button>
      </div>
    </div>
  </header>
  <main>
    <div class="breadcrumbs">
      <div class="container">
        <ul class="breadcrumbs__list">
          <li class="breadcrumbs__item">
            <a class="breadcrumbs__link" href="advice.html">–ì–ª–∞–≤–Ω–∞—è</a>
          </li>
          <li class="breadcrumbs__item">
            <span class="breadcrumbs__link">–î–æ—Ö–æ–¥—ã</span>
          </li>
        </ul>
      </div>
    </div>
    
      <h1 class="page-content__title">–î–æ—Ö–æ–¥—ã</h1>
      <div class="cont">
       
    <form id="dataForm">
      <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:
        <select name="category" required>
          <option value="–ó–∞—Ä–∞–±–æ—Ç–Ω–∞—è –ø–ª–∞—Ç–∞">–ó–∞—Ä–∞–±–æ—Ç–Ω–∞—è –ø–ª–∞—Ç–∞</option>
          <option value="–ü—Ä–æ—Ü–µ–Ω—Ç—ã —Å –¥–µ–ø–æ–∑–∏—Ç–∞">–ü—Ä–æ—Ü–µ–Ω—Ç—ã —Å –¥–µ–ø–æ–∑–∏—Ç–∞</option>
          <option value="–ü—Ä–æ—Ü–µ–Ω—Ç—ã —Å –¥–µ–ø–æ–∑–∏—Ç–∞">–î–∏–≤–∏–¥–µ–Ω–¥—ã</option>
          <option value="–ü—Ä–æ—Ü–µ–Ω—Ç—ã —Å –¥–µ–ø–æ–∑–∏—Ç–∞">–ü–æ–¥–∞—Ä–∫–∏</option>
          <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
        </select>
      </label>
      <label>–°—É–º–º–∞:
        <input type="number" name="amount" step="1000" required>
      </label>
      <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>
<div class="table-wrapper">
    <table id="recordsTable">
      <thead>
        <tr>
          <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
          <th>–°—É–º–º–∞</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr>
          <td><b>–ò—Ç–æ–≥–æ</b></td>
          <td class="total" id="totalCell">0</td>
        </tr>
      </tfoot>
    </table>
    </div>
  </div>
  </main>
  <footer class="footer">
    <div class="container">
      <div class="footer__content">
        <a class="footer__logo-link" href="advice.html">
          <img class="footer__logo" src="images/logo.png" height="36" width="170" alt="–õ–æ–≥–æ—Ç–∏–ø –°–µ–º–µ–π–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞">
        </a>
        <ul class="footer__contacts-list">
          <li class="footer__contacts-item">
            <span class="footer__contacts-text">–ü–æ–∑–≤–æ–Ω–∏—Ç—å –†–∏–Ω–∞—Ç—É</span>
            <a class="footer__contacts-phone" href="tel:+77056600636">+7 705 660 06 36</a>
          </li>
          <li class="footer__contacts-item">
            <span class="footer__contacts-text">–ü–æ–∑–≤–Ω–∏—Ç—å –ê–Ω–µ</span>
            <a class="footer__contacts-phone" href="tel:+77006937462">+7 700 693 74 62</a>
          </li>
        </ul>
        <div class="footer__info">
          <span class="footer__info-text">–°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç –•–∞—Å–∞–Ω–æ–≤—ã—Ö</span>
        </div>
        <span class="footer__note">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç 20.08.2025</span>
      </div>
    </div>
  </footer>

  <script>
    function loadData() {
      const data = JSON.parse(localStorage.getItem('records') || '[]');
      const tbody = document.querySelector('#recordsTable tbody');
      tbody.innerHTML = '';
      let total = 0;

      data.forEach((row, index) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${row.category}</td>
          <td>${row.amount}</td>
          <td><button class="delete-btn" data-index="${index}">–£–¥–∞–ª–∏—Ç—å</button></td>
        `;
        tbody.appendChild(tr);
        total += parseFloat(row.amount);
      });

      document.getElementById('totalCell').textContent = total.toFixed(2);

      // –ù–∞–≤–µ—à–∏–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
      document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          const i = e.target.dataset.index;
          data.splice(i, 1);
          localStorage.setItem('records', JSON.stringify(data));
          loadData();
        });
      });
    }

    document.getElementById('dataForm').addEventListener('submit', e => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const record = {
        category: formData.get('category'),
        amount: formData.get('amount')
      };

      const data = JSON.parse(localStorage.getItem('records') || '[]');
      data.push(record);
      localStorage.setItem('records', JSON.stringify(data));

      e.target.reset();
      loadData();
    });

    loadData();

     // üì± –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(() => console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
      .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', err));
  }
  </script>

</body>

</html>